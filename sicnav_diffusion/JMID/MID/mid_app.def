Bootstrap: docker
From: python:3.8.19

%post
    pip install absl-py==2.1.0
    pip install aiohappyeyeballs==2.3.4
    pip install aiohttp==3.10.0
    pip install aiosignal==1.3.1
    pip install async-timeout==4.0.3
    pip install attrs==23.2.0
    pip install backcall==0.2.0
    pip install beautifulsoup4==4.10.0
    pip install brotlipy==0.7.0
    pip install cachetools==5.4.0
    pip install certifi==2021.10.8
    pip install cffi==1.15.0
    pip install chardet==4.0.0
    pip install charset-normalizer==2.0.4
    pip install click==8.1.7
    pip install comm==0.2.2
    pip install contourpy==1.1.1
    pip install cryptography==36.0.0
    pip install cvxpy==1.5.2
    pip install cycler==0.12.1
    pip install debugpy==1.8.2
    pip install decorator==5.1.1
    pip install dill==0.3.8
    pip install distinctipy==1.3.4
    pip install dnspython==2.2.1
    pip install docker-pycreds==0.4.0
    pip install easydict==1.13
    pip install einops==0.8.0
    pip install filelock==3.4.2
    pip install fonttools==4.53.1
    pip install frozenlist==1.4.1
    pip install fsspec==2024.6.1
    pip install gitdb==4.0.11
    pip install GitPython==3.1.43
    pip install glob2==0.7
    pip install google-auth==2.32.0
    pip install google-auth-oauthlib==1.0.0
    pip install grpcio==1.65.2
    pip install idna==3.3
    pip install imageio==2.34.2
    pip install importlib_metadata==8.2.0
    pip install importlib_resources==6.4.0
    pip install ipykernel==6.29.5
    pip install ipython==7.31.1
    pip install ipywidgets==8.1.3
    pip install jedi==0.18.1
    pip install Jinja2==2.11.3
    pip install joblib==1.4.2
    pip install jupyter_client==8.6.2
    pip install jupyter_core==5.7.2
    pip install jupyterlab_widgets==3.0.11
    pip install kiwisolver==1.4.5
    pip install libarchive-c==2.9
    pip install lightning-utilities==0.11.6
    pip install Markdown==3.6
    pip install MarkupSafe==2.1.5
    pip install matplotlib==3.7.5
    pip install matplotlib-inline==0.1.2
    pip install mpmath==1.3.0
    pip install multidict==6.0.5
    pip install ncls==0.0.68
    pip install nest-asyncio==1.6.0
    pip install networkx==3.1
    pip install numpy==1.24.4
    pip install nvidia-cublas-cu12==12.1.3.1
    pip install nvidia-cuda-cupti-cu12==12.1.105
    pip install nvidia-cuda-nvrtc-cu12==12.1.105
    pip install nvidia-cuda-runtime-cu12==12.1.105
    pip install nvidia-cudnn-cu12==9.1.0.70
    pip install nvidia-cufft-cu12==11.0.2.54
    pip install nvidia-curand-cu12==10.3.2.106
    pip install nvidia-cusolver-cu12==11.4.5.107
    pip install nvidia-cusparse-cu12==12.1.0.106
    pip install nvidia-nccl-cu12==2.20.5
    pip install nvidia-nvjitlink-cu12==12.6.20
    pip install nvidia-nvtx-cu12==12.1.105
    pip install oauthlib==3.2.2
    pip install orjson==3.10.6
    pip install packaging==24.1
    pip install pandas==2.0.3
    pip install parso==0.8.3
    pip install pastel==0.2.1
    pip install pexpect==4.8.0
    pip install pickleshare==0.7.5
    pip install Pillow==9.0.1
    pip install pkginfo==1.8.2
    pip install platformdirs==4.2.2
    pip install poethepoet==0.10.0
    pip install POT==0.9.4
    pip install prettytable
    pip install prompt-toolkit==3.0.20
    pip install protobuf==5.27.3
    pip install psutil==5.8.0
    pip install ptyprocess==0.7.0
    pip install pyasn1==0.6.0
    pip install pyasn1_modules==0.4.0
    pip install pycosat==0.6.3
    pip install pycparser==2.21
    pip install Pygments==2.11.2
    pip install pyOpenSSL==21.0.0
    pip install pyparsing==3.1.2
    pip install PySocks==1.7.1
    pip install python-dateutil==2.9.0.post0
    pip install python-etcd==0.4.5
    pip install pytorch-lightning==2.3.3
    pip install pytz==2021.3
    pip install PyYAML==6.0
    pip install pyzmq==26.0.3
    pip install requests==2.27.1
    pip install requests-oauthlib==2.0.0
    pip install rsa==4.9
    pip install scikit-learn==1.3.2
    pip install scipy==1.10.1
    pip install sentry-sdk==2.12.0
    pip install setproctitle==1.3.3
    pip install setuptools==58.0.4
    pip install six==1.16.0
    pip install smmap==5.0.1
    pip install soupsieve==2.3.1
    pip install sympy==1.13.1
    pip install tensorboard==2.14.0
    pip install tensorboard-data-server==0.7.2
    pip install tensorboardX==2.6.2.2
    pip install threadpoolctl==3.5.0
    pip install tomlkit==0.13.0
    pip install torch==2.4.0 --index-url https://download.pytorch.org/whl/cu124
    pip install torchaudio --index-url https://download.pytorch.org/whl/cu124
    pip install torchcde==0.2.5
    pip install torchdiffeq==0.2.4
    pip install torchdyn==1.0.6
    pip install torchelastic==0.2.2
    pip install torchmetrics==1.4.0.post0
    pip install torchsde==0.2.6
    pip install torchvision==0.19.0 --index-url https://download.pytorch.org/whl/cu124
    pip install tornado==6.4.1
    pip install tqdm==4.62.3
    pip install traitlets==5.14.3
    pip install trampoline==0.1.2
    pip install triton==3.0.0
    pip install typing_extensions==4.12.2
    pip install tzdata==2024.1
    pip install urllib3==1.26.19
    pip install wandb==0.17.5
    pip install wcwidth==0.2.5
    pip install Werkzeug==3.0.3
    pip install wheel==0.37.1
    pip install widgetsnbextension==4.0.11
    pip install yarl==1.9.4
    pip install zipp==3.19.2

%environment
    export NVARCH="${NVARCH:-"x86_64"}"
    export NVIDIA_REQUIRE_CUDA="${NVIDIA_REQUIRE_CUDA:-"cuda>=11.3 brand=tesla,driver>=418,driver<419 brand=tesla,driver>=440,driver<441 driver>=450"}"
    export NV_CUDA_CUDART_VERSION="${NV_CUDA_CUDART_VERSION:-"11.3.58-1"}"
    export NV_CUDA_COMPAT_PACKAGE="${NV_CUDA_COMPAT_PACKAGE:-"cuda-compat-11-3"}"
    export NV_ML_REPO_ENABLED="${NV_ML_REPO_ENABLED:-"1"}"
    export NV_ML_REPO_URL="${NV_ML_REPO_URL:-"https://developer.download.nvidia.com/compute/machine-learning/repos/ubuntu1804/x86_64"}"
    export CUDA_VERSION="${CUDA_VERSION:-"11.3.0"}"
    export LD_LIBRARY_PATH="${LD_LIBRARY_PATH:-"/usr/local/nvidia/lib:/usr/local/nvidia/lib64"}"
    export NVIDIA_VISIBLE_DEVICES="${NVIDIA_VISIBLE_DEVICES:-"all"}"
    export NVIDIA_DRIVER_CAPABILITIES="${NVIDIA_DRIVER_CAPABILITIES:-"compute,utility"}"
    export NV_CUDA_LIB_VERSION="${NV_CUDA_LIB_VERSION:-"11.3.0-1"}"
    export NV_NVTX_VERSION="${NV_NVTX_VERSION:-"11.3.58-1"}"
    export NV_LIBNPP_VERSION="${NV_LIBNPP_VERSION:-"11.3.3.44-1"}"
    export NV_LIBNPP_PACKAGE="${NV_LIBNPP_PACKAGE:-"libnpp-11-3=11.3.3.44-1"}"
    export NV_LIBCUSPARSE_VERSION="${NV_LIBCUSPARSE_VERSION:-"11.5.0.58-1"}"
    export NV_LIBCUBLAS_PACKAGE_NAME="${NV_LIBCUBLAS_PACKAGE_NAME:-"libcublas-11-3"}"
    export NV_LIBCUBLAS_VERSION="${NV_LIBCUBLAS_VERSION:-"11.4.2.10064-1"}"
    export NV_LIBCUBLAS_PACKAGE="${NV_LIBCUBLAS_PACKAGE:-"libcublas-11-3=11.4.2.10064-1"}"
    export NV_LIBNCCL_PACKAGE_NAME="${NV_LIBNCCL_PACKAGE_NAME:-"libnccl2"}"
    export NV_LIBNCCL_PACKAGE_VERSION="${NV_LIBNCCL_PACKAGE_VERSION:-"2.9.6-1"}"
    export NCCL_VERSION="${NCCL_VERSION:-"2.9.6-1"}"
    export NV_LIBNCCL_PACKAGE="${NV_LIBNCCL_PACKAGE:-"libnccl2=2.9.6-1+cuda11.3"}"
    export NV_CUDA_CUDART_DEV_VERSION="${NV_CUDA_CUDART_DEV_VERSION:-"11.3.58-1"}"
    export NV_NVML_DEV_VERSION="${NV_NVML_DEV_VERSION:-"11.3.58-1"}"
    export NV_LIBCUSPARSE_DEV_VERSION="${NV_LIBCUSPARSE_DEV_VERSION:-"11.5.0.58-1"}"
    export NV_LIBNPP_DEV_VERSION="${NV_LIBNPP_DEV_VERSION:-"11.3.3.44-1"}"
    export NV_LIBNPP_DEV_PACKAGE="${NV_LIBNPP_DEV_PACKAGE:-"libnpp-dev-11-3=11.3.3.44-1"}"
    export NV_LIBCUBLAS_DEV_VERSION="${NV_LIBCUBLAS_DEV_VERSION:-"11.4.2.10064-1"}"
    export NV_LIBCUBLAS_DEV_PACKAGE_NAME="${NV_LIBCUBLAS_DEV_PACKAGE_NAME:-"libcublas-dev-11-3"}"
    export NV_LIBCUBLAS_DEV_PACKAGE="${NV_LIBCUBLAS_DEV_PACKAGE:-"libcublas-dev-11-3=11.4.2.10064-1"}"
    export NV_LIBNCCL_DEV_PACKAGE_NAME="${NV_LIBNCCL_DEV_PACKAGE_NAME:-"libnccl-dev"}"
    export NV_LIBNCCL_DEV_PACKAGE_VERSION="${NV_LIBNCCL_DEV_PACKAGE_VERSION:-"2.9.6-1"}"
    export NV_LIBNCCL_DEV_PACKAGE="${NV_LIBNCCL_DEV_PACKAGE:-"libnccl-dev=2.9.6-1+cuda11.3"}"
    export LIBRARY_PATH="${LIBRARY_PATH:-"/usr/local/cuda/lib64/stubs"}"
    export NV_CUDNN_VERSION="${NV_CUDNN_VERSION:-"8.2.0.53"}"
    export NV_CUDNN_PACKAGE="${NV_CUDNN_PACKAGE:-"libcudnn8=8.2.0.53-1+cuda11.3"}"
    export NV_CUDNN_PACKAGE_DEV="${NV_CUDNN_PACKAGE_DEV:-"libcudnn8-dev=8.2.0.53-1+cuda11.3"}"
    export NV_CUDNN_PACKAGE_NAME="${NV_CUDNN_PACKAGE_NAME:-"libcudnn8"}"
    export PYTORCH_VERSION="${PYTORCH_VERSION:-"v1.11.0"}"